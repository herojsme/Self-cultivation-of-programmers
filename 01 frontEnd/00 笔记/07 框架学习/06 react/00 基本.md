### ReactDom Api

```js
- ReactDom.render()
- ReactDom.hydrate() 与render一样,但是是服务器端用
- ReactDom.unmountComponentAtNode()  //dom中卸载
- ReactDom.findDOMNode()   查找dom node
- ReactDom.createPortal()   渲染到dom节点
    + ReactDom.createPortal(child,container)  事件冒泡到React树而不是dom树
```

### React 通用方法

```js
- React.Component
- React.PureComponent 浅比较 shouldComponentUpdate props state
- React.memo   记忆组件,浅比较, 可以用第二个参数自定义比较
- React.createElement(
    type,
    [props],
    [...children]
  )
- React.createFactory(type)
- React.cloneElement(
    element,
    [props],
    [...children]
  )
  React.isValidElement(object)
- React.Children
  + .map(children, function[(thisArg)])
  + .forEach(children, function[(thisArg)])
  + .count(children)
  + .only(children)
  + .toArray(children)
```

### 一些功能

```js
  - jsx 是 react.createElement 的语法糖
  - 组件首字母必须大写
  - props 的 属性没有赋值默认为 true
  - 强制让组件重新渲染
      + this.forceUpdate()
  - 语法
      + 事件小驼峰命名
      + jsx 表达式三元表达式 返回 null 阻止组件渲染
      + key 可以识别列表中哪个组件需要渲染
  - 表单受控组件和非受控组件
      + 受控 将state与表单项中的value值绑定在一起,有state的值来控制表单元素的值,称为受控组件
      + 非受控 表单数据由 dom 节点控制,用 ref 获取表单数据
  - 代码分割
      + import()结合 React.lazy,Suspense 组件包裹懒组件；
        const OtherComponent = React.lazy(() => import('./OtherComponent'));
        <Suspense fallback={<div>Loading...</div>}>
          <OtherComponent />
        </Suspense>
      + 服务器渲染可以用loadableComponents
  - 错误捕捉
      + 组件内部定义componentDidCatch()
      + static getDerivedStateFromError()
  - ref获取组件实例或挂载元素
      + React.createRef()创建 ref,再把 ref 指向元素
      + ref转发： ref 指向组件,组件层可以用 forwardRef(props,ref)接受,下发到具体子组件或元素
      + 函数组件 ref 不能使用,如果要用可以跟 forwardRef 配合
      + <input ref={ins=>this.intRef=ins}/>
      + ref 不会被传递,ref 不在 props 里面
  - fragment 占位符
      + <></>
  - 高阶组件
      + 定义：函数接收一个组件返回一个新组件
      + 组件上的静态不会被高阶组件继承,所以需要拷贝 (工具hoist-non-react-statics)
      + HOC会显示在ReactDeveloperTools里面，如果添加displayName则会显示组件名，方便调试；
      + 不要修改原组件，应该使用组合；原组件有可能在另外的地方使用，如果修改也会受到影响；
      + 不要在render里使用hoc，会不断重新生成新子树，性能损失，子组件的状态丢失；
  - 动态渲染
      + renderProps
  - fragment
      + <></>
```

### 与其他库协同

```js
  - ref获取原生dom
  - ReactDom.render 渲染原生dom
```

### 性能问题

```js
  - 压缩代码 terser webpack rollup
  - react 分析器
  - 使用不可变数据  Immer 或 immutability-helper
  - 虚拟化长列表 react-window 和 react-virtualized
  - shouldComponentUpdate

// profiler 可以分析渲染组件的开销 onRenderFn 可以获取开销
  <Profiler id='main' onRender={onRenderFn} >
    <Profiler id="int1">
      <Input/>
    </Profiler>
  </Profiler>
  <Profiler id="int2">
    <Input/>
  </Profiler>
```

### 类型检查

```js
  - 静态类型检查 ts;
  - 类型检查 props-types;
```

### 测试

```js
-jest;
```
